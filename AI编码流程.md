---
title: AI编码流程
date: 2025-12-09
tags:
---
#### 1 定义 (Spec Phase) 
- **人类工作：** 创建一个 .cursorrules 或者 spec.md 文件。不写代码，只写逻辑、数据结构、API 接口定义、边缘情况处理。
- **价值：** 工程师专注于系统设计，Spec 就是设计的载体。
#### 2 生成 (Scaffolding Phase) 
-  将 spec.md 喂给 **Claude Code**。
- 之所以用cc，主因是并行。同时生成品质好。
- **结果：** AI 生成“90% 符合架构预期的代码”**。
#### 3 完善 (Refinement)
- **清除**粗糙点（格式混乱、命名不规范、缺少注释、逻辑不严谨），并**完善**（补全错误处理、引入依赖）。
- 粗糙之处，由 人类观察、编译器/Linter、单元测试框架等发现。
- 用cursor，因为cursor是流式（逐行）处理的。
-  Cursor 的 Composer 模式可以读取 spec.md 作为“真理来源（Source of Truth）”。修改代码时，AI 会对比 Spec，如果偏离了设计文档，AI 甚至可以提醒。
# 4 审查 ( Review)  CodeRabbit
| 特性        | Cursor (完善 / Refinement)  | CodeRabbit (审查 / Review)                |
| :-------- | :------------------------ | :-------------------------------------- |
| **触发时间点** | **写代码时**（交互式、实时）          | **提交代码后**（Pull Request 时）               |
| **工作环境**  | IDE (Cursor)              | Git 平台 (GitHub/GitLab)                  |
| **核心目标**  | **高效地**完成代码实现，确保**代码整洁**。 | **自动化地**发现深层隐患，确保**代码质量和安全**。           |
| **检查侧重**  | 语法、格式、函数拆分、**实时逻辑修正**。    | **高阶问题**：逻辑漏洞、性能瓶颈、安全漏洞、**与 Spec 的偏离**。 |
| **产出结果**  | **新的代码**（直接改变源文件）         | **Code Review 评论**（不改代码，只提建议）           |
| **人机关系**  | **协作**（AI 跟着人一起写）         | **审计**（AI 检查人的工作成果）                     |
- **CodeRabbit：** 在审查时，不仅仅检查语法错误，还可以检查**“实现代码是否符合 spec.md 的要求”**。
- CodeRabbit (审查)： 相当于 “监理做安检”。（你以为的Debug，实际是静态分析）
- 动作： 找逻辑漏洞、安全风险、代码异味。
- 产出： Code Review 意见报告。

# 5 验收： 
 - “Debug”。
- 动作： 把代码跑起来，看功能对不对。如果报错了，进行 Debug。
-  这里有一个“回环（Loop）”**。当 Phase 5 测试报错时，通常**不是**让人类手动去改代码，而是**带着报错信息回到 Phase 3 (Cursor)**。
    - **动作：** 复制报错信息 -> 粘贴给 Cursor -> Cursor 读取代码和报错 -> 自动修正 -> 再次测试。
    -  Debug，也是 AI 辅助的。